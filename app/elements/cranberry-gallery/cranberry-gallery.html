<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/byutv-jsonp/byutv-jsonp.html">
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../../bower_components/iron-icons/social-icons.html">
<link rel="import" href="../gigya-sharebar/gigya-sharebar.html">
<link rel="import" href="../gigya-comments/gigya-comments.html">
<link rel="import" href="../cranberry-slider/cranberry-slider.html">

<dom-module id="cranberry-gallery">
  <template>
    <style is="custom-style">
      @import "cranberry-gallery/cranberry-gallery";
    </style>

    <iron-media-query query="(min-width: 960px)" query-matches="{{desktop}}"></iron-media-query>
    <iron-media-query query="(min-width: 720px) and (max-width:959px)" query-matches="{{tablet}}"></iron-media-query>
    <iron-media-query query="(max-width:719px)" query-matches="{{mobile}}"></iron-media-query>

    <byutv-jsonp auto url="http://sedev.libercus.net/rest.json" params='{"request": "gallery", "desiredItemID": "3401"}' on-response="handleResponse" debounce-duration="300" id="request"></byutv-jsonp>

    <div class="ut-center">
      <iron-image src="http://www.placehold.it/970x250&text=AD_970x250"></iron-image>
    </div>

    <div id="galleryContainer">
      <div class="flex-absolute tag-links">
        <template is="dom-repeat" items="{{parseTags(gallery.tags)}}">
          <paper-button raised>{{item}}</paper-button>
        </template>
      </div>
      <cranberry-slider images="{{gallery.mediaAssets.images}}" autostart="true" arrows="true" bullets="false" info="true" caption="true"></cranberry-slider>
      <div class="flex-absolute share-buttons">
        <paper-button raised id="buyButton">Buy Image</paper-button>
        <gigya-sharebar share-buttons-id="gigya-share-buttons-gallery"></gigya-sharebar>
      </div>
    </div>


    <p>{{gallery.FullText}}</p>

    <div class="ut-grid ut-margin-bottom">
      <div class="flex-3 ut-center" id="images">
        <template is="dom-repeat" items="{{gallery.mediaAssets.images}}">
          <iron-image src$="http://www.standard.net{{item.small}}" sizing="cover" data-index$="{{index}}" style="background-color: lightgray;" preload></iron-image>
        </template>
      </div>
      <div class="flex ut-center">
        <google-dfp route="{{route}}" adpos="bottom_of_stream" adsize="[[300,250],[300,600]]" adgroup="{$ config.dfpAdStructure.adGroupID $}" adgrouping="{$ config.dfpAdStructure.adGrouping $}" adsubgrouping="{$ config.dfpAdStructure.adSubGrouping $}"></google-dfp>
        <img src="http://www.placehold.it/300x600&text=Related"/>
      </div>
    </div>


    <!-- Comments -->
    <div class="ut-center">
      <gigya-comments comments-id="gallery-comments"></gigya-comments>
    </div>

    <div class="ut-center">
      <iron-image src="http://www.placehold.it/970x250&text=AD_970x250"></iron-image>
    </div>

  </template>
    <script src="cranberry-gallery.js"></script>
</dom-module>
