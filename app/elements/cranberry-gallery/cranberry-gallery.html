<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/byutv-jsonp/byutv-jsonp.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../../bower_components/iron-icons/social-icons.html">
<link rel="import" href="../../bower_components/iron-icons/editor-icons.html">
<link rel="import" href="../cranberry-slider/cranberry-slider.html">
<link rel="import" href="../gigya-comments/gigya-comments.html">
<link rel="import" href="../gigya-sharebar/gigya-sharebar.html">

<dom-module id="cranberry-gallery">
  <template>
    <style>
      @import "cranberry-gallery/cranberry-gallery";
    </style>

    <paper-dialog id="modal" modal>
      <div class="gallery-container">
        <cranberry-slider id="modalSlider" base-url="{$ config.baseDomain $}" images="{{gallery.mediaAssets.images}}" autostart arrows info caption modal></cranberry-slider>
        <paper-button id="modalClose" raised>Close</paper-button>
      </div>
    </paper-dialog>

    <app-route route="{{route}}" pattern="/:id" data="{{routeData}}"></app-route>
    <byutv-jsonp on-response="_handleResponse" id="request"></byutv-jsonp>

    <div class="ut-center">
      <google-dfp section="[[gallery.sectionInformation.sectionName]]" section-parent="[[gallery.sectionInformation.sectionParentName]]" tags="[[gallery.tags]]" ad-pos="leaderboard_bottom" ad-size="[[728, 90],[970, 90],[970, 250]]" ad-group="{$ config.dfpAdStructure.adGroupID $}" ad-grouping="{$ config.dfpAdStructure.adGrouping $}" ad-sub-grouping="{$ config.dfpAdStructure.adSubGrouping $}"></google-dfp>
    </div>

    <div class="gallery-container">

      <div class="flex-absolute tag-links">
        <paper-button raised>{{tags.1}}</paper-button>
      </div>

      <div class="flex-absolute expand-link">
        <paper-button raised id="modalOpen" class="rounded-button"><iron-icon icon="icons:fullscreen"></iron-icon></paper-button>
      </div>
      <cranberry-slider id="mainSlider" base-url="{$ config.baseDomain $}" images="{{gallery.mediaAssets.images}}" autostart arrows info caption>
        <div class="flex-absolute share-buttons">
          <paper-button raised id="buyButton" class="rounded-button"><iron-icon icon="editor:attach-money"></iron-icon></paper-button>
          <gigya-sharebar share-buttons-id="gigya-share-buttons-gallery"></gigya-sharebar>
        </div>
      </cranberry-slider>

    <h1 class="gallery-title">{{gallery.title}}</h1>
    <p class="time-stamp"> {{gallery.updated}} </p>
    <p class="body-text">{{gallery.FullText}}</p>

    <div class="ut-grid ut-margin-bottom">
      <div class="flex-3 ut-center" id="images">
        <template is="dom-repeat" items="{{gallery.mediaAssets.images}}">
          <iron-image src$="{$ config.baseDomain $}{{item.small}}" sizing="cover" data-index$="{{index}}" style="background-color: lightgray;" preload></iron-image>
        </template>
      </div>
      <div class="flex ut-center">
        <google-dfp section="[[gallery.sectionInformation.sectionName]]" section-parent="[[gallery.sectionInformation.sectionParentName]]" tags="[[gallery.tags]]" ad-pos="top_of_stream" ad-size="[[300, 250],[300, 600]]" ad-group="{$ config.dfpAdStructure.adGroupID $}" ad-grouping="{$ config.dfpAdStructure.adGrouping $}" ad-sub-grouping="{$ config.dfpAdStructure.adSubGrouping $}"></google-dfp>
      </div>
    </div>


    <!-- Comments -->
    <div class="ut-center">
      <gigya-comments stream-id="[[gallery.genericLink]]"></gigya-comments>
    </div>

    <!-- Youneeq Content Area -->
    <div class="ut-center">
      <youneeq-content user="[[user]]" content="[[gallery]]" domain="{$ config.baseDomain $}"></youneeq-content>
    </div>

    <div class="ut-center">
      <google-dfp section="[[gallery.sectionInformation.sectionName]]" section-parent="[[gallery.sectionInformation.sectionParentName]]" tags="[[gallery.tags]]" ad-pos="leaderboard_bottom" ad-size="[[728, 90],[970, 90],[970, 250]]" ad-group="{$ config.dfpAdStructure.adGroupID $}" ad-grouping="{$ config.dfpAdStructure.adGrouping $}" ad-sub-grouping="{$ config.dfpAdStructure.adSubGrouping $}"></google-dfp>
    </div>

  </template>
    <script src="cranberry-gallery.js"></script>
</dom-module>
