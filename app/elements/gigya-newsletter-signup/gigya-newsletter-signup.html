<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../../bower_components/iron-media-query/iron-media-query.html">

<dom-module id="gigya-newsletter-signup">
  <template>
    <style include="shared-styles">
      @import "theme.css";
      @import "gigya-newsletter-signup/gigya-newsletter-signup";
    </style>
    <style include="gigya-styles"></style>

    <iron-media-query query="(min-width: 960px)" query-matches="{{desktop}}"></iron-media-query>
    <iron-media-query query="(min-width: 720px) and (max-width:959px)" query-matches="{{tablet}}"></iron-media-query>
    <iron-media-query query="(max-width:719px)" query-matches="{{mobile}}"></iron-media-query>

    <h2>Newsletters</h2>
    <p>{$ config.title $}'s newsletters are a comprehensive summary of the day's most important news, compiled and currated by the newsroom, delivered to your email inbox.</p>
    <p>Keep me updated on the following newsletters: </p>
    <form is="iron-form" action="/" id="newsletterForm">
      <div class="newsletter-checkbox-container" id="checkboxes">
        <template is="dom-repeat" items="[[newsletters]]">
          <div class="checkbox-wrapper">
            <paper-checkbox class="newsletter-checkbox" name="[[item.naming]]" value="[[_getNewsletterValue(account, item)]]" checked="[[_getNewsletterValue(account, item)]]">[[item.displayName]]</paper-checkbox>
          </div>
        </template>
      </div>
      <div class="update-profile">
        <div class="register-messages">
          <template is="dom-repeat" items="[[notices]]">
            <div class$="notice {{item.type}}">
              <div class="notice-info">
                <div class="notice-message">{{item.message}}</div>
                <div hidden>{{item.code}}</div>
              </div>
            </div>
          </template>
        </div>
      </div>
      <div class="form-buttons" mobile-layout$="{{mobile}}">
        <paper-spinner id="spinner" active$="[[spinnerActive]]" hidden$="[[!spinnerActive]]"></paper-spinner>
        <paper-button on-tap="_handleUpdateAccount" id="submit">Update Subscriptions</paper-button>
      </div>
    </form>

  </template>
  <script src="gigya-newsletter-signup.js"></script>
</dom-module>
