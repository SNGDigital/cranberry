<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">

<dom-module id="cranberry-content-card">
  <template>
    <style>
      @import "cranberry-content-card/cranberry-content-card";
    </style>

    <!-- Content List Card Control/Display -->
    <template is="dom-if" if="[[content]]">
      <!-- Need to rework this for array selectors -->
      <template is="dom-if" if="[[_isStory(item.contentType)]]">
        <template is="dom-if" if="[[_hasImage(item.mediaAssets.images.0.url)]]">
          <a href="/story/[[item.itemId]]">
            <paper-card heading="[[item.title]]" fade-image preload-image image="{$ config.baseDomain $}/[[item.mediaAssets.images.0.large]]" elevation="1" class="story">
              <div class="card-content">
                <span class="story-date">[[item.updated]]</span>
                <span>[[_trimText(item.preview)]]</span>
              </div>
              <div class="card-actions">
                <div class="card-info">
                  <span class="content-tag">[[_scrubTag(item.sectionInformation.primarySection)]]</span>
                  <div class="content-comments">[[item.socialInformation.comments]] &nbsp;<iron-icon icon="communication:chat"></iron-icon></div>
                </div>
              </div>
            </paper-card>
          </a>
        </template>
        <template is="dom-if" if="[[!_hasImage(item.mediaAssets.images.0.url)]]">
          <a href="/story/[[item.itemId]]">
            <paper-card heading="[[item.title]]" elevation="1" class="story no-image">
              <div class="card-content">
                <span>[[_trimText(item.preview)]]</span>
              </div>
              <div class="card-actions">
                <div class="card-info">
                  <span class="content-tag">[[_scrubTag(item.sectionInformation.primarySection)]]</span>
                  <div class="content-comments">[[item.socialInformation.comments]] &nbsp;<iron-icon icon="communication:chat"></iron-icon></div>
                </div>
              </div>
            </paper-card>
          </a>
        </template>
      </template>
      <template is="dom-if" if="[[_isGallery(item.contentType)]]">
        <a href="/photo-gallery/[[item.itemId]]">
          <paper-card class="gallery" heading="[[item.title]]" image="{$ config.baseDomain $}/[[item.mediaAssets.images.0.exlarge]]" elevation="1">
            <div class="icon">
              <iron-icon icon="image:photo-camera"></iron-icon>
            </div>
            <div class="card-content">
              <span>[[_trimText(item.preview)]]</span>
            </div>
            <div class="card-actions">
              <div class="card-info">
                <span class="content-tag">[[_scrubTag(item.sectionInformation.sectionName)]]</span>
                <span class="content-date">[[item.updated]]</span>
              </div>
            </div>
          </paper-card>
        </a>
      </template>
    </template>

    <!-- Featured Card Control/Display -->
    <template is="dom-if" if="[[featured]]">
      <template is="dom-if" if="[[_isStory(item.contentType)]]">

        <template is="dom-if" if="[[main]]">
          <a class="main" href="/story/[[item.itemId]]">
            <paper-card class="featured main" heading="[[item.title]]" image="{$ config.baseDomain $}/[[item.mediaAssets.images.0.exlarge]]" elevation="1">
              <div class="card-actions">
                <div class="card-info">
                  <span class="content-tag">[[_scrubTag(item.sectionInformation.primarySection)]]</span>
                  <span class="content-date">[[item.updated]]</span>
                </div>
              </div>
            </paper-card>
          </a>
        </template>

        <template is="dom-if" if="[[list]]">
          <a class="list" href="/story/[[item.itemId]]">
            <paper-card class="featured list" heading="[[item.title]]" image="{$ config.baseDomain $}/[[item.mediaAssets.images.0.exlarge]]" elevation="1">
              <div class="card-actions">
                <div class="card-info">
                  <span class="content-tag">[[_scrubTag(item.sectionInformation.primarySection)]]</span>
                  <span class="content-date">[[item.updated]]</span>
                </div>
              </div>
            </paper-card>
          </a>
        </template>
      </template>
      <template is="dom-if" if="[[_isGallery(item.contentType)]]">
        <template is="dom-if" if="[[main]]">
          <a class="main" href="/photo-gallery/[[item.itemId]]">
            <paper-card class="featured main gallery" heading="[[item.title]]" image="{$ config.baseDomain $}/[[item.mediaAssets.images.0.exlarge]]" elevation="1">
              <div class="icon">
                <iron-icon icon="image:photo-camera"></iron-icon>
              </div>
              <div class="card-actions">
                <div class="card-info">
                  <span class="content-tag">[[_scrubTag(item.sectionInformation.sectionName)]]</span>
                  <span class="content-date">[[item.updated]]</span>
                </div>
              </div>
            </paper-card>
          </a>
        </template>

        <template is="dom-if" if="[[list]]">
          <a class="list" href="/photo-gallery/[[item.itemId]]">
            <paper-card class="featured list gallery" heading="[[item.title]]" image="{$ config.baseDomain $}/[[item.mediaAssets.images.0.exlarge]]" elevation="1">
              <div class="icon">
                <iron-icon icon="image:photo-camera"></iron-icon>
              </div>
              <div class="card-actions">
                <div class="card-info">
                  <span class="content-tag">[[_scrubTag(item.sectionInformation.sectionName)]]</span>
                  <span class="content-date">[[item.updated]]</span>
                </div>
              </div>
            </paper-card>
          </a>
        </template>
      </template>
      <template is="dom-if" if="[[slider]]">
        <template is="dom-if" if="[[_isStory(item.contentType)]]">
          <a class="list" href="/story/[[item.itemId]]">
            <paper-card class="slider" heading="[[item.title]]" image="{$ config.baseDomain $}/[[item.mediaAssets.images.0.medium]]" elevation="1">
                <div class="card-content">
                  [[item.title]]
                </div>
                <div class="card-actions">
                  <div class="card-info">
                    <span class="content-tag">[[_scrubTag(item.sectionInformation.primarySection)]]</span>
                    <span class="content-date">[[item.updated]]</span>
                  </div>
                </div>
              </paper-card>
            </a>
          </template>
          <template is="dom-if" if="[[_isGallery(item.contentType)]]">
            <a class="list" href="/photo-gallery/[[item.itemId]]">
              <paper-card class="gallery" heading="[[item.title]]" image="{$ config.baseDomain $}/[[item.mediaAssets.images.0.medium]]" elevation="1">
                  <div class="icon">
                    <iron-icon icon="image:photo-camera"></iron-icon>
                  </div>
                  <div class="card-content">
                    [[item.title]]
                  </div>
                  <div class="card-actions">
                    <div class="card-info">
                      <span class="content-tag">[[_scrubTag(item.sectionInformation.sectionName)]]</span>
                      <span class="content-date">[[item.updated]]</span>
                    </div>
                  </div>
                </paper-card>
              </a>
            </template>
      </template>
    </template>
  </template>
    <script src="cranberry-content-card.js"></script>
</dom-module>
