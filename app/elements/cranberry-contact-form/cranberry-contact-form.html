<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-form/iron-form.html">
<link rel="import" href="../../bower_components/iron-form-element-behavior/iron-form-element-behavior.html">
<link rel="import" href="../../bower_components/byutv-jsonp/byutv-jsonp.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-input/paper-textarea.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower_components/re-captcha/re-captcha.html">
<link rel="import" href="../../bower_components/gold-phone-input/gold-phone-input.html">

<dom-module id="cranberry-contact-form">
  <template>
    <style>
      @import "cranberry-contact-form/cranberry-contact-form";
    </style>
    <byutv-jsonp on-response="handleResponse" debounce-duration="300" id="request"></byutv-jsonp>
    <paper-dropdown-menu id="departmentDropdown" label="Department" selected-item="{{selectedDepartment}}" always-float-label>
      <paper-listbox id="departmentSelector" class="dropdown-content" selected="0">
        <template is="dom-repeat" items="[[departments]]" as="department">
          <paper-item value="[[department.email]]">[[department.name]]</paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
    <form is="iron-form" action="/" id="form">
      <paper-input name="name" label="Name" required auto-validate error-message="You must provide a name." allowed-pattern="[A-zA-Z ]" auto-complete></paper-input>
      <paper-input name="email" label="Email" required auto-validate error-message="You must provide a email." allowed-pattern="[\@\.A-zA-Z0-9]"></paper-input>
      <paper-input name="address" label="Address" required auto-validate error-message="You must provide a address." allowed-pattern="[.A-zA-Z0-9 ]"></paper-input>
      <!-- <paper-input name="telephone" label="Telephone" required auto-validate error-message="You must provide a phone number." allowed-pattern="[0-9]"></paper-input> -->
      <gold-phone-input name="telephone" label="Telephone" country-code="1" phone-number-pattern="XXX-XXX-XXXX" required auto-validate error-message="You must provide a phone number."></gold-phone-input>
      <paper-textarea name="message" label="Message" value="" char-counter maxlength="350"></paper-textarea>
      <re-captcha sitekey="{$ config.contactInformation.recaptchaKey $}" response="{{recapResponse}}" id="recap"></re-captcha>
      <paper-button on-tap="_handleSubmit" id="submitButton" disabled>Submit</paper-button>
      <paper-button on-tap="_handleReset">Reset</paper-button>

      <div class="submitting" hidden$="{{!submitting}}">
        <p>Processing... <paper-spinner active$="{{submitting}}"></paper-spinner></p>
      </div>
    </form>

  </template>
  <script src="cranberry-contact-form.js"></script>

</dom-module>
