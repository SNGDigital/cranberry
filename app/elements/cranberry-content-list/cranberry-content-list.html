<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/byutv-jsonp/byutv-jsonp.html">
<link rel="import" href="../../bower_components/iron-media-query/iron-media-query.html">
<link rel="import" href="../../bower_components/iron-image/iron-image.html">
<link rel="import" href="../../bower_components/iron-icons/social-icons.html">
<link rel="import" href="../../bower_components/iron-icons/image-icons.html">
<link rel="import" href="../../bower_components/iron-icons/communication-icons.html">
<link rel="import" href="../google-dfp/google-dfp.html">
<link rel="import" href="../cranberry-content-card/cranberry-content-card.html">
<link rel="import" href="../gigya-top-comments/gigya-top-comments.html">
<link rel="import" href="../cranberry-jobs-widget/cranberry-jobs-widget.html">

<dom-module id="cranberry-content-list">
  <template>
    <style>
      @import "cranberry-content-list/cranberry-content-list";
    </style>
    <iron-media-query query="(max-width:1370px)" query-matches="{{leaderboard}}"></iron-media-query>
    <byutv-jsonp
      on-response="_handleResponse"
      on-load="_handleLoad"
      last-response="{{response}}"
      last-request="{{request}}"
      last-error="{{error}}"
      id="request"></byutv-jsonp>
    <div class="content-cards">
        <template is="dom-repeat" items="{{items}}" initial-count="3">
            <template is="dom-if" if="[[_checkJobsWidget(index)]]">
                <cranberry-jobs-widget affiliate-id="{$ config.jobs.affiliateId $}" widget-id="{$ config.jobs.widgetId $}" hidden$="{{hidden}}"></cranberry-jobs-widget>
            </template>
            <template is="dom-if" if="[[_checkTopComments(index)]]">
              <gigya-top-comments count="5" age="90"></gigya-top-comments>
            </template>
            <template is="dom-if" if="[[_checkInStreamAd(index)]]">
              <div class="stream-advertisement-wrapper">
                <div class="stream-advertisement">
                  <template is="dom-if" if="[[_checkAdPos(index,2)]]">
                    <google-dfp section="[[sections]]" tags="[[tag]]" ad-pos="Top_Of_Stream" ad-size="[[300, 250]]" ad-group="{$ config.dfpAdStructure.adGroupID $}" ad-grouping="{$ config.dfpAdStructure.adGrouping $}" ad-sub-grouping="{$ config.dfpAdStructure.adSubGrouping $}"></google-dfp>
                  </template>
                  <template is="dom-if" if="[[_checkAdPos(index,11)]]">
                    <google-dfp section="[[sections]]" tags="[[tag]]" ad-pos="Bottom_Of_Stream" ad-size="[[300, 250]]" ad-group="{$ config.dfpAdStructure.adGroupID $}" ad-grouping="{$ config.dfpAdStructure.adGrouping $}" ad-sub-grouping="{$ config.dfpAdStructure.adSubGrouping $}"></google-dfp>
                  </template>
                </div>
              </div>
            </template>
            <template is="dom-if" if="[[_checkNativeAd(index)]]">
              <div class="stream-advertisement-wrapper">
                <div class="stream-advertisement">
                    <google-dfp section="[[sections]]" tags="[[tag]]" ad-pos="Middle_of_Stream" ad-size="[[300, 250]]" ad-group="{$ config.dfpAdStructure.adGroupID $}" ad-grouping="{$ config.dfpAdStructure.adGrouping $}" ad-sub-grouping="{$ config.dfpAdStructure.adSubGrouping $}"></google-dfp>
                </div>
              </div>
            </template>
            <template is="dom-if" if="[[_checkLeaderboardAd(index)]]">
              <div class="leaderboard-advertisement-wrapper">
                <div class="leaderboard-advertisement">
                  <template is="dom-if" if="[[_checkAdPos(index,9)]]">
                    <google-dfp section="[[sections]]" tags="[[tag]]" ad-pos="Middle_Of_Stream" ad-size="[[970, 250],[970, 90],[728, 90],[320, 50]]" ad-group="{$ config.dfpAdStructure.adGroupID $}" ad-grouping="{$ config.dfpAdStructure.adGrouping $}" ad-sub-grouping="{$ config.dfpAdStructure.adSubGrouping $}"></google-dfp>
                  </template>
                </div>
              </div>
            </template>
            <cranberry-content-card item="[[item]]" content></cranberry-content-card>
        </template>
        <div class="leaderboard-advertisement-wrapper">
            <div class="leaderboard-advertisement">
                <google-dfp section="[[sections]]" tags="[[tag]]" ad-pos="Last_Of_Stream" ad-size="[[970, 250],[970, 90],[728, 90],[320, 50]]" ad-group="{$ config.dfpAdStructure.adGroupID $}" ad-grouping="{$ config.dfpAdStructure.adGrouping $}" ad-sub-grouping="{$ config.dfpAdStructure.adSubGrouping $}"></google-dfp>
            </div>
        </div>
    </div>
  </template>
  <script src="cranberry-content-list.js"></script>
</dom-module>
