<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-form/iron-form.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-spinner/paper-spinner.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/gold-password-input/gold-password-input.html">
<link rel="import" href="../../bower_components/iron-media-query/iron-media-query.html">
<link rel="import" href="../gigya-styles/gigya-styles.html">

<dom-module id="gigya-forgot-password">
  <template>
    <style include="shared-styles">
      @import "theme.css";
    </style>
    <style include="gigya-styles">
      @import "gigya-forgot-password/gigya-forgot-password";
    </style>

    <iron-media-query query="(min-width: 960px)" query-matches="{{desktop}}"></iron-media-query>
    <iron-media-query query="(min-width: 720px) and (max-width:959px)" query-matches="{{tablet}}"></iron-media-query>
    <iron-media-query query="(max-width:719px)" query-matches="{{mobile}}"></iron-media-query>

    <h2>Forgot Password</h2>
    <div class="forgot-password-form" hidden$="[[!showForm]]">
      <div class="forgot-password-info">
        Enter your <strong>email address or username</strong> and weâ€™ll email you instructions on how to reset your password.
      </div>
      <div class="forgot-password-form">
        <form is="iron-form" action="/" id="forgotPasswordForm">
          <div class="form-input">
            <paper-input name="username" label="Username or Email Address" required auto-validate error-message="You must provide a username or email address." allowed-pattern="[\@\.A-zA-Z0-9]"></paper-input>
          </div>
          <div class="form-links">
            <div>Emails usually take about 2-5 minutes to arrive.</div>
            <div>Email or username not found? <a on-tap="_handleRegister" id="register">Create a new account</a>.</div>
          </div>
          <div class="user-messages">
            <template is="dom-repeat" items="{{notices}}">
              <div class$="notice {{item.type}}">
                <div class="notice-info">
                  <div class="notice-message">{{item.message}}</div>
                  <div hidden>{{item.code}}</div>
                </div>
              </div>
            </template>
          </div>
          <div class="form-buttons" mobile-layout$="{{mobile}}">
            <paper-spinner id="spinner" active$="[[spinnerActive]]" hidden$="[[!spinnerActive]]"></paper-spinner>
            <paper-button class="long-text" on-tap="_handleForgotPassword" id="submit" raised>Send Reset Password E-mail</paper-button>
          </div>
        </form>
      </div>
    </div>
    <gold-password-input-validator pattern="[A-zA-Z0-9]*"></gold-password-input-validator>
  </template>
  <script src="gigya-forgot-password.js"></script>
</dom-module>
