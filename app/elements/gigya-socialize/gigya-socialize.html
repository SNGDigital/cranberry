<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../bower_components/moment-js/moment-js.html">
<link rel="import" href="../../bower_components/paper-dialog-scrollable/paper-dialog-scrollable.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../bower_components/iron-data-table/iron-data-table.html">
<link rel="import" href="../gigya-update-profile/gigya-update-profile.html">
<link rel="import" href="../gigya-change-password/gigya-change-password.html">
<link rel="import" href="../gigya-forgot-password/gigya-forgot-password.html">
<link rel="import" href="../gigya-login/gigya-login.html">
<link rel="import" href="../gigya-register/gigya-register.html">

<dom-module id="gigya-socialize">
  <template>
    <style include="shared-styles">
    @import "theme.css";
    @import "gigya-socialize/gigya-socialize";
    </style>
    <paper-dialog id="userModal" modal>
      <paper-dialog-scrollable>
        <template is="dom-if" if="[[user.isLoggedIn]]">
          <paper-toolbar>
            <paper-icon-button icon="close" dialog-confirm></paper-icon-button>
            <div class="user-title" hidden$="[[!user.isLoggedIn]]">[[user.firstName]] [[user.lastName]]</div>
          </paper-toolbar>
          <paper-toolbar>
            <paper-tabs id="accountTabs" selected="{{userSelected}}" autoselect>
              <paper-tab>My Profile</paper-tab>
              <paper-tab disabled>Membership</paper-tab>
              <paper-tab disabled>Newsletters</paper-tab>
              <paper-tab>Settings</paper-tab>
              <paper-tab>Password</paper-tab>
            </paper-tabs>
          </paper-toolbar>
          <div class="user-content">
            <div hidden$="{{!_equal(userSelected, 0)}}">
              <paper-material elevation="1">
                <div class="user-info">
                  <div class="user-photo">
                    <div hidden$="[[!user.photoURL]]">
                      <iron-image class="user" preload src="[[user.photoURL]]" fade></iron-image>
                    </div>
                    <div hidden$="[[user.photoURL]]"></div>
                  </div>
                  <div class="user-name">[[user.firstName]] [[user.lastName]]</div>
                  <div class="user-created">
                    Member since
                    <moment-js date="[[account.created]]" format="MMMM Do, YYYY"></moment-js>
                  </div>
                  <div class="user-settings">
                    <paper-button on-tap="_showAccountSettings" raised>Account Settings</paper-button>
                    <paper-button on-tap="_handleLogout" raised>Logout</paper-buttofn>
                  </div>
                  <!-- <iron-data-table items="[[account.identities]]">
                    <data-table-column name="Provider">
                      <template>[[item.provider]]</template>
                    </data-table-column>
                    <data-table-column name="Last Name">
                      <template>[[item.firstName]]</template>
                    </data-table-column>
                    <data-table-column name="Last Name">
                      <template>[[item.lastName]]</template>
                    </data-table-column>
                    <data-table-column name="Email">
                      <template>[[item.email]]</template>
                    </data-table-column>
                  </iron-data-table> -->
                  <div class="user-tabs">
                    <paper-tabs id="profileTabs" selected="{{profileSelected}}" autoselect>
                      <paper-tab disabled>My Comments</paper-tab>
                      <paper-tab disabled>My Photos</paper-tab>
                      <paper-tab disabled>My Stories</paper-tab>
                    </paper-tabs>
                  </div>
                </div>
              </paper-material>
            </div>
            <div hidden$="{{!_equal(userSelected, 1)}}"></div>
            <div hidden$="{{!_equal(userSelected, 2)}}"></div>
            <div hidden$="{{!_equal(userSelected, 3)}}">
              <gigya-update-profile user="[[user]]" account="[[account]]"></gigya-update-profile>
            </div>
            <div hidden$="{{!_equal(userSelected, 4)}}">
              <gigya-change-password user="[[user]]"></gigya-change-password>
            </div>
          </div>
        </template>
        <template is="dom-if" if="[[!user.isLoggedIn]]">
          <paper-toolbar class="user-toolbar">
            <paper-tabs id="guestTabs" selected="{{guestSelected}}" autoselect>
              <paper-tab>Login</paper-tab>
              <paper-tab>Register</paper-tab>
              <paper-tab>Forgot Password</paper-tab>
            </paper-tabs>
            <paper-icon-button icon="close" dialog-confirm></paper-icon-button>
          </paper-toolbar>
          <div class="user-content">
            <div hidden$="{{!_equal(guestSelected, 0)}}">
              <gigya-login api-key="{$ config.gigya.apiKey $}"></gigya-login>
            </div>
            <div hidden$="{{!_equal(guestSelected, 1)}}">
              <gigya-register></gigya-register>
            </div>
            <div hidden$="{{!_equal(guestSelected, 2)}}">
              <gigya-forgot-password></gigya-forgot-password>
            </div>
          </div>
        </template>
      </paper-dialog-scrollable>
    </paper-dialog>
  </template>
  <script src="gigya-socialize.js"></script>
</dom-module>
